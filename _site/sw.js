var CACHE_NAME = 'madhur-cache-v1'; var urlsToCache = [ 'https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js', 'https://cdn.bootcss.com/mdui/0.2.1/js/mdui.min.js', 'https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js', 'https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js', 'https://cdn.bootcss.com/mdui/0.2.1/css/mdui.min.css', 'https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css', '/category/Living.html', '/about/', '/category/any.html', '/category/book.html', '/category/', '/category/code.html', '/editor/', '/friends/', '/assets/css/global.css', '/', '/category/movie.html', '/search.json', '/sw.js', '/tags/', '/tags.json', '/category/technology.html', '/sitemap.xml', '/robots.txt', '/feed.xml', '/code/2018/08/05/event-loop.html', '/code/2018/06/23/promise.html', '/code/2018/06/19/grid.html', '/CHANGELOG.md', '/assets/css/customCss.css', '/assets/fonts/parley bold.ttf', '/assets/fonts/汉仪易烊千玺体.ttf', '/assets/images/bgimgs/gongyuanxun.jpg', '/assets/images/bgimgs/me.jpeg', '/assets/images/posts/event loop/eventLoop.png', '/assets/images/posts/grid/grid-1.png', '/assets/images/posts/grid/grid-2-1.png', '/assets/images/posts/grid/grid-2-2.png', '/assets/images/posts/grid/grid-2-3.png', '/assets/images/posts/grid/grid-2-4.png', '/assets/images/posts/grid/grid-3.png', '/assets/images/posts/grid/grid-4-1.png', '/assets/images/posts/grid/grid-4-2.png', '/assets/images/posts/grid/grid-5-1.png', '/assets/images/touch/apple-touch-icon.png', '/assets/images/touch/chrome-touch-icon-192x192.png', '/assets/images/touch/icon-128x128.png', '/assets/images/touch/ms-touch-icon-144x144-precomposed.png', '/assets/js/History.js', '/assets/js/customJS.js', '/assets/live2d/live2d-widget-model-shizuku/assets/exp/f01.exp.json', '/assets/live2d/live2d-widget-model-shizuku/assets/exp/f02.exp.json', '/assets/live2d/live2d-widget-model-shizuku/assets/exp/f03.exp.json', '/assets/live2d/live2d-widget-model-shizuku/assets/exp/f04.exp.json', '/assets/live2d/live2d-widget-model-shizuku/assets/moc/shizuku.1024/texture_00.png', '/assets/live2d/live2d-widget-model-shizuku/assets/moc/shizuku.1024/texture_01.png', '/assets/live2d/live2d-widget-model-shizuku/assets/moc/shizuku.1024/texture_02.png', '/assets/live2d/live2d-widget-model-shizuku/assets/moc/shizuku.1024/texture_03.png', '/assets/live2d/live2d-widget-model-shizuku/assets/moc/shizuku.1024/texture_04.png', '/assets/live2d/live2d-widget-model-shizuku/assets/moc/shizuku.1024/texture_05.png', '/assets/live2d/live2d-widget-model-shizuku/assets/moc/shizuku.moc', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/flickHead_00.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/flickHead_01.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/flickHead_02.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/idle_00.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/idle_01.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/idle_02.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/pinchIn_00.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/pinchIn_01.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/pinchIn_02.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/pinchOut_00.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/pinchOut_01.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/pinchOut_02.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/shake_00.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/shake_01.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/shake_02.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/tapBody_00.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/tapBody_01.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/mtn/tapBody_02.mtn', '/assets/live2d/live2d-widget-model-shizuku/assets/shizuku.model.json', '/assets/live2d/live2d-widget-model-shizuku/assets/shizuku.physics.json', '/assets/live2d/live2d-widget-model-shizuku/assets/shizuku.pose.json', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/flickHead_00.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/flickHead_01.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/flickHead_02.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/pinchIn_00.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/pinchIn_01.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/pinchIn_02.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/pinchOut_00.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/pinchOut_01.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/pinchOut_02.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/shake_00.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/shake_01.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/shake_02.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/tapBody_00.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/tapBody_01.mp3', '/assets/live2d/live2d-widget-model-shizuku/assets/snd/tapBody_02.mp3', '/assets/live2d/live2d-widget-model-shizuku/package-lock.json', '/assets/live2d/live2d-widget-model-shizuku/package.json', '/jekyll-theme-mdui-0.5.2.1.gem', '/jekylltheme.jpg', '/manifest.json', '/package-lock.json', ]; self.addEventListener('install', function(event) { event.waitUntil(caches.open(CACHE_NAME).then(function(cache) { return cache.addAll(urlsToCache); }).catch(function(err) { console.log('Cache add error: ', err); })); }); self.addEventListener('fetch', function(event) { event.respondWith( caches.match(event.request) .then(function(response) { if (response) { return response; } var fetchRequest = event.request.clone(); return fetch(fetchRequest).then( function(response) { if(!response || response.status !== 200 || response.type !== 'basic') { return response; } var responseToCache = response.clone(); caches.open(CACHE_NAME) .then(function(cache) { cache.put(event.request, responseToCache); }); return response; } ); }) ); }); self.addEventListener('fetch', function(event) { event.respondWith( caches.open(CACHE_NAME).then(function(cache) { return fetch(event.request).then(function(response) { cache.put(event.request, response.clone()); return response; }); }).catch(function() { return caches.match('/offline.html'); }) ); });